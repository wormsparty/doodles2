(window["webpackJsonpreact-app"]=window["webpackJsonpreact-app"]||[]).push([[0],[,,,,,,,,,,function(t,e,n){t.exports=n(18)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(3),r=n.n(i),a=n(8),s=n.n(a),o=(n(15),n(16),n(0)),$=n(1),h=n(5),l=n(4),u=n(2),c=n(6),p=n(9),v=function(){function t(e,n,i,r,a,s){Object($.a)(this,t),this.ctx=void 0,this.referenceWidth=void 0,this.referenceHeight=void 0,this.fontSize=void 0,this.font=void 0,this.fontFamily=void 0,this.windowWidth=void 0,this.windowHeight=void 0,this.marginLeft=void 0,this.marginRight=void 0,this.marginTop=void 0,this.marginBottom=void 0,this.scaleFactor=void 0,this.tilesize=void 0,this.ctx=e.getContext("2d"),this.scaleFactor=1,this.marginLeft=0,this.marginRight=0,this.marginTop=0,this.marginBottom=0,this.windowWidth=0,this.windowHeight=0,this.referenceWidth=n,this.referenceHeight=i,this.fontSize=r,this.fontFamily=a,this.font=r+"px "+a,this.tilesize=s}return Object(u.a)(t,[{key:"resize",value:function(t,e,n,i,r,a,s){this.scaleFactor=t,this.marginLeft=e,this.marginRight=n,this.marginTop=i,this.marginBottom=r,this.windowWidth=a,this.windowHeight=s,this.ctx.imageSmoothingEnabled=!1}},{key:"img",value:function(t,e,n,i){var r=this.tilesize*n,a=this.tilesize*i,s=0,o=0,$=0,h=0;if(e.x<0&&(s=-e.x),e.y<0&&($=-e.y),e.x+this.tilesize>this.referenceWidth&&(o=e.x+this.tilesize-this.referenceWidth),e.y+this.tilesize>this.referenceHeight&&(h=e.y+this.tilesize-this.referenceHeight),s<this.tilesize&&o<this.tilesize&&$<this.tilesize&&h<this.tilesize){var l=(e.x+s)*this.scaleFactor+this.marginLeft,u=(e.y+$)*this.scaleFactor+this.marginTop;this.ctx.drawImage(t.image,r+s,a+$,this.tilesize-s-o,this.tilesize-$-h,l,u,(this.tilesize-s-o)*this.scaleFactor,(this.tilesize-$-h)*this.scaleFactor)}}},{key:"rect",value:function(t,e,n,i){this.ctx.fillStyle=i;var r=t.x,a=t.y;r<0&&(e+=r,r=0),a<0&&(n+=a,a=0),r>=this.referenceWidth&&(e-=r-this.referenceWidth,r=this.referenceWidth-1),a>=this.referenceHeight&&(n-=a-this.referenceHeight,a=this.referenceHeight-1),e<=0||n<=0||this.ctx.fillRect(this.marginLeft+r*this.scaleFactor,this.marginTop+a*this.scaleFactor,e*this.scaleFactor,n*this.scaleFactor)}},{key:"text",value:function(t,e,n){this.ctx.fillStyle=n,this.ctx.font=this.font;var i=e.x,r=e.y+this.fontSize-3;this.ctx.save(),this.ctx.translate(this.marginLeft,this.marginTop),this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.fillText(t,i,r),this.ctx.restore()}},{key:"clear",value:function(t){this.ctx.fillStyle="rgba(5, 5, 5, 1)";var e=this.marginLeft,n=this.marginRight,i=this.marginBottom,r=this.marginTop,a=this.windowWidth,s=this.windowHeight;this.ctx.fillRect(0,0,e,s),this.ctx.fillRect(e,0,a-n-e,r),this.ctx.fillRect(a-n,0,n,s),this.ctx.fillRect(e,s-i,a-n-e,i),this.ctx.fillStyle=t,this.ctx.fillRect(e,r,a-e-n,s-i-r)}},{key:"get_char_width",value:function(){return 8}}]),t}(),f="#000000",d="#FFFF00",y=new Map([["#","#646464"],[".","#646464"],["~","#C8C8C8"]]),w=["1","2","3","4","5","6","7","8","9","0",">","<"],g=["*","$","/","\\"],m=[".","<",">"],_=["x"],M=new Map([["t","#6699FF"],["@","#FF0000"]]),F=new Map([["$","#FFFF00"],["=","#FF0000"],["*","#dd99FF"],["%","#119900"],["/","#999999"],["\\","#FFFFFF"]]),x=["/","\\"],b=["*"],k=new Map([["*","#999999"],["&","#FF0000"]]),O=new Map([["/",1],["\\",3],["",0]]),D=function(){function t(e,n){Object($.a)(this,t),this.x=void 0,this.y=void 0,this.x=e,this.y=n}return Object(u.a)(t,[{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"copy",value:function(){return new t(this.x,this.y)}}]),t}(),j=function(t){function e(t,n,i){var r;return Object($.a)(this,e),(r=Object(h.a)(this,Object(l.a)(e).call(this,t,n))).id=void 0,r.id=i,r}return Object(c.a)(e,t),e}(D),S=function(t){function e(t,n,i){var r;return Object($.a)(this,e),(r=Object(h.a)(this,Object(l.a)(e).call(this,t,n))).usage=void 0,r.usage=i,r}return Object(c.a)(e,t),Object(u.a)(e,[{key:"copy",value:function(){return new e(this.x,this.y,this.usage)}}]),e}(D),P=function(t){function e(t,n,i,r,a,s){var o;return Object($.a)(this,e),(o=Object(h.a)(this,Object(l.a)(e).call(this,t,n))).vx=void 0,o.vy=void 0,o.symbol=void 0,o.power=void 0,o.vx=i,o.vy=r,o.symbol=a,o.power=s,o}return Object(c.a)(e,t),Object(u.a)(e,[{key:"copy",value:function(){return new e(this.x,this.y,this.vx,this.vy,this.symbol,this.power)}}]),e}(D),C=function(){function t(e,n,i,r,a,s,o,h,l,u){Object($.a)(this,t),this.map=void 0,this.meta=void 0,this.teleportMap=void 0,this.tile2color=void 0,this.texts=void 0,this.teleports=void 0,this.teleportCount=void 0,this.obstacles=void 0,this.obstacleColor=void 0,this.initialItemPositions=void 0,this.start=void 0,this.backgroundColor=void 0,this.textColor=void 0,this.targetSpawner=void 0,this.obstacleVisible=function(){return!1},this.map=e,this.meta=n,this.teleportMap=i,this.tile2color=r,this.texts=a,this.teleports=new Map,this.teleportCount=new Map,this.initialItemPositions=new Map,this.start=new D(0,0),this.targetSpawner=h,this.obstacles=new Map,null!=l&&(this.obstacleVisible=l),this.backgroundColor=void 0!==s?s:f,this.textColor=""!==o?o:d,this.obstacleColor=void 0!==u?u:d}return Object(u.a)(t,[{key:"parse",value:function(t){var e=this.map.split("\n"),n=this.meta.split("\n");22!==e.length&&console.log("La carte V "+t+" n'a pas exactement 22 lignes ("+e.length+")"),22!==n.length&&console.log("La carte M "+t+" n'a pas exactement 22 lignes ("+n.length+")");for(var i=0;i<22;i++)56!==e[i].length&&console.log("V "+t+" l."+i+" n'a pas exactement 56 chars ("+e[i].length+")"),56!==n[i].length&&console.log("M "+t+" l."+i+" n'a pas exactement 56 chars ("+n[i].length+")");for(var r=0;r<22;r++)for(var a=0;a<56;a++){var s=n[r][a];"#"===s?"#"!==e[r][a]&&console.log("Les murs ne marchent pas en ("+a+", "+r+"), carte = "+t):w.indexOf(s)>-1?(this.teleports.has(s)||(this.teleports.set(s,[]),this.teleportCount.set(s,0)),this.teleports.get(s).push(new j(a,r,this.teleportCount.get(s))),this.teleportCount.set(s,this.teleportCount.get(s)+1)):g.indexOf(s)>-1?(this.initialItemPositions.has(s)||this.initialItemPositions.set(s,[]),this.initialItemPositions.get(s).push(new S(a,r,1))):_.indexOf(s)>-1?(this.obstacles.has(s)||this.obstacles.set(s,[]),this.obstacles.get(s).push(new D(a,r))):" "!==s&&void 0!==s&&("@"===s?this.start=new D(a,r):console.log("Unknown char: "+s))}}},{key:"get_symbol_at",value:function(t,e){return this.map[57*e+t]}}]),t}(),W=function(){function t(e,n,i,r,a,s,o){Object($.a)(this,t),this.canvas=void 0,this.graphics=void 0,this.referenceWidth=0,this.referenceHeight=0,this.integerZoom=!1,this.mousePosX=0,this.mousePosY=0,this.canvas=document.getElementById(e),this.graphics=new v(this.canvas,n,i,r,a,o),this.graphics?(this.referenceWidth=n,this.referenceHeight=i,this.integerZoom=s,null!=this.canvas&&this.canvas.focus()):console.log("Failed to load Canvas2D.")}return Object(u.a)(t,[{key:"setMousePos",value:function(t,e){this.mousePosX=Math.floor((t-this.graphics.marginLeft)/this.graphics.scaleFactor),this.mousePosY=Math.floor((e-this.graphics.marginTop)/this.graphics.scaleFactor)}},{key:"click",value:function(t,e){this.setMousePos(t,e)}},{key:"clear",value:function(t){this.graphics.clear(t)}},{key:"rect",value:function(t,e,n,i){this.graphics.rect(t,e,n,i)}},{key:"text",value:function(t,e,n){this.graphics.text(t,e,n)}},{key:"textCentered",value:function(t,e,n){var i=new D(this.referenceWidth/2-this.get_char_width()*t.length/2,e);this.text(t,i,n)}},{key:"get_char_width",value:function(){return this.graphics.get_char_width()}},{key:"img",value:function(t,e,n,i){this.graphics.img(t,e,n,i)}},{key:"getZoom",value:function(t,e,n,i){var r=e/i,a=t/n;return r<a&&(a=r),this.integerZoom?((a=Math.floor(a))<1&&(a=1),a):a}},{key:"resize",value:function(t,e){var n=this.getZoom(t,e,this.referenceWidth,this.referenceHeight),i=Math.floor((t-this.referenceWidth*n)/2),r=Math.floor((e-this.referenceHeight*n)/2),a=Math.floor(t-this.referenceWidth*n-2*i),s=Math.floor(e-this.referenceHeight*n-2*r);null!=this.canvas&&(this.canvas.width=t,this.canvas.height=e),this.graphics.resize(n,i+a,i,r+s,r,t,e)}}]),t}(),z=new Map([["en",new Map([["M"," taken"]])],["fr",new Map([["M"," pris"],["F"," prise"]])]]),T=new Map([["en","[5] Take "],["fr","[5] Prendre "]]),E=new Map([["en","Throw"],["fr","Lancer"]]),H=new Map([["en",new Map([["M"," thrown"]])],["fr",new Map([["M"," lanc\xe9"],["F"," lanc\xe9e"]])]]),A=new Map([["en",new Map([["*",{text:"rock",genre:"M"}],["/",{text:"sword",genre:"M"}],["\\",{text:"sword lvl.2",genre:"M"}],["=",{text:"fire spell",genre:"M"}],["",{text:"nothing",genre:"M"}]])],["fr",new Map([["*",{text:"caillou",genre:"M"}],["/",{text:"\xe9p\xe9e",genre:"F"}],["\\",{text:"\xe9p\xe9e lvl.2",genre:"F"}],["=",{text:"sort de feu",genre:"M"}],["",{text:"rien",genre:"M"}]])]]),I=new Map([["en",new Map([["#","Crushed!"],["~","Drown!"],["v","Impaled!"],[">","Impaled!"],["<","Impaled!"],["^","Impaled!"]])],["fr",new Map([["#","\xc9cras\xe9!"],["~","Noy\xe9!"],["v","Empal\xe9!"],["<","Empal\xe9!"],[">","Empal\xe9!"],["^","Empal\xe9!"]])]]),N=new Map([["en","Space to retry"],["fr","Espace pour r\xe9essayer"]]),L=new Map([["en","New game"],["fr","Nouvelle partie"]]),R=new Map([["en","Load"],["fr","Charger"]]),U=new Map([["en","Save"],["fr","Sauver"]]),q=new Map([["en","Exit"],["fr","Quitter"]]),B=function(){function t(e,n,i,r){Object($.a)(this,t),this.pos=void 0,this.symbol=void 0,this.pv=void 0,this.pvMax=void 0,this.pos=e,this.symbol=n,this.pv=i,this.pvMax=r}return Object(u.a)(t,[{key:"copy",value:function(){return new t(this.pos.copy(),this.symbol,this.pv,this.pvMax)}}]),t}(),V=function(){function t(e,n){Object($.a)(this,t),this.targets=void 0,this.tick=void 0,this.targets=e,this.tick=n}return Object(u.a)(t,[{key:"print",value:function(){for(var t={targets:[],tick:this.tick},e=0;e<this.targets.length;e++)t.targets[e]={pos:{x:this.targets[e].pos.x,y:this.targets[e].pos.y},symbol:this.targets[e].symbol,pv:this.targets[e].pv,pv_max:this.targets[e].pvMax};return t}},{key:"copy",value:function(){var e=new t([],this.tick),n=!0,i=!1,r=void 0;try{for(var a,s=this.targets[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.targets.push(o.copy())}}catch($){i=!0,r=$}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e}},{key:"reset",value:function(){this.tick=0,this.targets.splice(0,this.targets.length)}}],[{key:"parse",value:function(e){if(null===e)return null;var n=new t([],e.tick),i=!0,r=!1,a=void 0;try{for(var s,o=e.targets[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var $=s.value;n.targets.push(new B(new D($.pos.x,$.pos.y),$.symbol,$.pv,$.pvMax))}}catch(h){r=!0,a=h}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}]),t}(),Z=function(){function t(e,n,i){Object($.a)(this,t),this.spawnerUpdate=void 0,this.targetUpdate=void 0,this.pv2color=void 0,this.spawnerUpdate=e,this.targetUpdate=n,this.pv2color=i}return Object(u.a)(t,[{key:"inner_update",value:function(t,e,n,i,r,a){var s=t.hits_projectile(n.pos),$=Object(o.a)(s,2),h=$[0],l=$[1];if(-1!==h&&(t.projectile2item(t.currentMapData,n.pos,h),n.pv-=l,n.pv<=0))return i.targets.splice(e,1),[!1,null];if(n.pos.equals(r)){if("O"!==n.symbol)return t.gameOverMessage=I.get("fr").get(n.symbol),[!0,r];r.x+=a.x,r.y+=a.y}return[!0,null]}},{key:"update",value:function(t,e,n){this.spawnerUpdate(e);for(var i=0;i<e.targets.length;){var r=e.targets[i],a=this.targetUpdate(r.symbol),s=this.inner_update(t,i,r,e,n,a),$=Object(o.a)(s,2),h=$[0],l=$[1];if(h){if(null!==l)return l;if(r.pos.x+=a.x,r.pos.y+=a.y,r.pos.y>=22||r.pos.y<0||r.pos.x<0||r.pos.x>=56||"#"===t.get_symbol_at(r.pos))e.targets.splice(i,1);else{var u=this.inner_update(t,i,r,e,n,a),c=Object(o.a)(u,2);if(h=c[0],l=c[1],h){if(null!==l)return l;i++}}}}return n}}]),t}(),J=new C("                                           ~~~~~~~~~~~~~\n                                                ~~~~~~~~\n                                                 ~~~~~~~\n                                              ~~~~~~~~~~\n                                    ##        ~~~~~~~~~~\n                                 *********        ~~~~~~\n                               ***********          ~~~~\n                             *************           ~~~\n                             **************      ~~~~~~~\n                             **************     ~~~~~~~~\n                             **************  ~~~~~~~~~~~\n                              ************~~~~~~~~~~~~~~\n                         ~~~~~~~~********~~~~~~~~~~~~~~~\n                    ~~~~~~~~~~~~~~~~##~~~~~~~~~~~~~~~~~~\n               ~~~~~~~############################~~~###\n            ~~~~~~~~~~~#................................\n          ~~~~~~~~~~~~~~##.......................#~~~###\n           ~~~~~~~~~~~~~~~#######################~~~~~~~\n               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n                                 ~~~~~~~~~~~~~~~~~~~~~~~\n                                          ~~~~~~~~~~~~~~","                                                        \n                                                        \n                                                        \n                                                        \n                                    ##                  \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                    ##                  \n                      ############################   ###\n                       #     @                         1\n                        ##                       #   ###\n                          #######################       \n                                                        \n                                                        \n                                                        \n                                                        ",new Map([["1","mission"]]),new Map([["~","#0000FF"],[".","#FF7700"],["#","#AA3300"],[">","#FFFFFF"]]),new Map([["en",new Map([["Thirsty for adventure,",new D(4,3)],["you sailed to new lands.",new D(4,4)],["After quiet and storm,",new D(4,6)],["filled with hope, you",new D(4,7)],["finally land.",new D(4,8)]])],["fr",new Map([["En soif de nouvelles aventures,",new D(4,3)],["vous avez pris le large.",new D(4,4)],["Apr\xe8s calme et temp\xeates,",new D(4,6)],["rempli d'espoirs, vous",new D(4,7)],["accostez sur une",new D(4,8)],["terre nouvelle.",new D(4,9)]])]]),"#000005","",null,null,""),Y=new C("                                                        \n         ***************************************        \n        *                                       *       \n       *             ------------                *      \n       *            ------[]------         $     *      \n       *            --------------  $      $     *      \n       *         $  --------------  $      $     *      \n   ~~~~*  $   $  $  --------------  $  $   $     *~~~~~ \n  ~~~~~~*                                        *~~~~~~\n~~~~~~~~~***********************     ************~~~~~~~\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**  *~~~~~~~~~~~~~~~~~~~\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**~~~~~~~~~~~~~~~~~~~~\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~###*####################\n################################...m....................\n........................................................\n################################........................\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~########################\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~        \n           ~~~~~~~~~~~~~~~~~~                           \n               ~~~~~~~~~~~                              \n                                                        ","                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                                        \n                                ### ####################\n################################                       2\n1                                                      2\n################################                       2\n                                ########################\n                                                        \n                                                        \n                                                        \n                                                        \n                                                        ",new Map([["1","bateau"],["2","outside"]]),new Map([["~","#0000FF"],[".","#FF7700"],["#","#AA3300"],["*","#FFFFFF"]]),new Map,"#000005","",null,null,""),K=new C('      """"""              #...........#                 \n       """"               #............#     """""""    \n                          #.............#      """"""   \n                          #..............#####          \n                         #....................#####     \n                        #..........................#####\n     """"              #................................\n    """"""            #.................................\n     """"           ##..................................\n                 ###....................................\n            #####.....................................##\n       #####........................................##  \n#######...........................................##    \n................................................##      \n...........................................#####        \n....................................#######             \n#######...................##########                    \n       ##.............####                      ""      \n         ##........###                         """"     \n           ########                             ""      \n                     """                                \n                    """""                               ',"                          #11111111111#                 \n                          #            #                \n                          #             #               \n                          #              #####          \n                         #                    #####     \n                        #                          #####\n                       #                               3\n                      #                                3\n                    ##                                 3\n                 ###                                   3\n            #####                                     ##\n       #####                                        ##  \n#######                                           ##    \n2                                               ##      \n2                                          #####        \n2                                   #######             \n#######                   ##########                    \n       ##             ####                              \n         ##        ###                                  \n           ########                                     \n                                                        \n                                                        ",new Map([["1","spike"],["2","mission"],["3","training"]]),new Map([["$","#FF00AA"],["#","#555555"],[".","#333333"],['"',"#00FF00"],["^","#FFFF00"],[">","#FFFFFF"],["<","#FFFFFF"]]),new Map,"#050505","",null,null,""),X=new C("                       #~~~~~~~~~~~~~~~~#               \n                       #~~~~~~~~~~~~~~~~#               \n                      #~~~........~~~~~~~#              \n#####               ##~~..............~~~~##            \n.....####        ###........................###         \n.........########..............................###      \n..................................................######\n.....######.............................................\n#####      #####........................................\n                ##......................................\n                  #.....................................\n                   #.................................###\n                   #................................#   \n                  #...............................##    \n                 #~~~~.........................###      \n               ##~~~~~~...............~~~~~####         \n            ###~~~~~~~~~~......~~~~~~~~####             \n          ##~~~~~~~~~~~~~~~~~~~~~~~~~~#                 \n         #~~~~~~~~~~~~~~~~~~~~~~~~~~~#                  \n        #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##                \n       #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##              \n       #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#             ","                       #                #               \n                       #                #               \n                      #                  #              \n#####               ##                    ##            \n3    ####        ###                        ###         \n3        ########                              ###      \n3 @                                               ######\n3    ######                                            1\n#####      #####                                       1\n                ##                                     1\n                  #                                    1\n                   #                                 ###\n                   #                                #   \n                  #                               ##    \n                 #                             ###      \n               ##          *               ####         \n            ###                        ####             \n          ##                          #                 \n         #                           #                  \n        #                             ##                \n       #                                ##              \n       #                                  #             ",new Map([["1","leaveRock"],["3","outside"]]),new Map([["~","#0000FF"]]),new Map,"#020302","",new Z((function(t){t.tick=(t.tick+1)%20,t.tick>=16||(t.targets.push(new B(new D(40-t.tick,-1),"O",3,3)),t.targets.push(new B(new D(39-t.tick,-1),"O",3,3)))}),(function(){return new D(0,1)}),(function(t){return 3===t?"#00FF00":2===t?"#FF9900":"#FF0000"})),null,""),Q=new C("                      #.................#               \n                      #.................#               \n                      #.................#               \n                     #...................#              \n                      #..................#              \n     ~~~~~            #.................#               \n   ~~~~~~~~~~~~      #..................#               \n      ~~~~~~         #..................#               \n                     #..................#      ~~~~     \n                     #..................#     ~~~~~~~~  \n                     #..................#       ~~~~~   \n                     #...................#              \n                     #...................#              \n                      #..................#              \n                      #..................#              \n                      #..................#              \n                       #.................#              \n         ~~~~~~        #................#               \n      ~~~~~~~          #...............#                \n         ~~~~~~        #...............#                \n                        #.............#                 \n                         #...........#                  ","                      #22222222222222222#               \n                      #                 #               \n                      #                 #               \n                     #                   #              \n                      #                  #              \n                      #                 #               \n                     #                  #               \n                     #                  #               \n                     #                  #               \n                     #                  #               \n                     #                  #               \n                     #                   #              \n                     #                   #              \n                      #                  #              \n                      #                  #              \n                      #                  #              \n                       #                 #              \n                       #                #               \n                       #               #                \n                       #      @        #                \n                        #             #                 \n                         #11111111111#                  ",new Map([["1","outside"],["2","spike2"]]),new Map([["#","#555555"],["~","#0000FF"]]),new Map,"#050505","",new Z((function(t){t.tick=(t.tick+1)%32;var e=t.tick;t.tick>=17&&(e=32-t.tick),t.targets.push(new B(new D(23+e,-1),"v",1,1))}),(function(){return new D(0,1)}),(function(t){return"#00FF00"})),null,""),G=new C("                      #.................#               \n                      #.................#               \n                      #.................#               \n                      #.................#               \n                      #.................#               \n     ~~~~~            #.................#               \n   ~~~~~~~~~~~~       #.................#               \n      ~~~~~~          #.................#               \n                      #.................#      ~~~~     \n                      #.................#     ~~~~~~~~  \n                      #.................#       ~~~~~   \n                      #.................#               \n                      #.................#               \n                      #.................#               \n                      #.................#               \n                      #.................#               \n                      #.................#               \n         ~~~~~~       #.................#               \n      ~~~~~~~          #.................#              \n         ~~~~~~        #.................#              \n                       #.................#              \n                       #.................#              ","                      #11111111111111111#               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                      #                 #               \n                       #                 #              \n                       #       @         #              \n                       #                 #              \n                       #22222222222222222#              ",new Map([["1","swordTreasure"],["2","spike"]]),new Map([["#","#555555"],["~","#0000FF"]]),new Map,"#050505","",new Z((function(t){t.tick=(t.tick+1)%32;var e=t.tick;t.tick>=17&&(e=32-t.tick),t.targets.push(new B(new D(23+e,-1),"v",1,1)),t.targets.push(new B(new D(22+e,-1),"v",1,1))}),(function(){return new D(0,1)}),(function(t){return"#00FF00"})),null,""),tt=new C("                                                        \n                                             ~~~~       \n    ~~~~                                       ~~~~     \n      ~~~~~~                                            \n              #############################             \n         #####.............................####         \n       ##......................................##       \n      #..........................................#      \n     #............................................#     \n     #............................................#     \n     #............................................#     \n     #............................................#     \n      #..........................................#      \n       ##......................................##       \n         #####............................#####         \n              ####....................####              \n                  #..................#       ~~         \n      ~~~~~~      #..................#        ~~~       \n   ~~~~~~~        #..................#                  \n      ~~~~~~      #..................#                  \n                  #..................#                  \n                   #.................#                  ","                                                        \n                                                        \n                                                        \n                                                        \n              #############################             \n         #####                             ####         \n       ##                                      ##       \n      #                                          #      \n     #                                            #     \n     #                                            #     \n     #          $                     /           #     \n     #                                            #     \n      #                                          #      \n       ##                                      ##       \n         #####                            #####         \n              ####                    ####              \n                  #                  #                  \n                  #                  #                  \n                  #                  #                  \n                  #                  #                  \n                  #                  #                  \n                   #11111111111111111#                  ",new Map([["1","spike2"]]),new Map([["#","#555555"],["~","#0000FF"]]),new Map,"#050500","",null,null,""),et=new C('                       #~~~~.~~~~~~~~~~~#               \n     """               #~~~...~~~~~~~~~~#       """     \n       """            #~........~~~~~~~~~#       """"   \n                    ##~..............~~~~~##            \n                 ###........................###         \n         ########..............................##       \n#########........................................#      \n..................................................#     \n..................................................#     \n..................................................#     \n..................................................#     \n#######...........................................#     \n       #####.....................................#      \n            ###.................................#       \n               ###.............................#        \n                  ####~~~~~~~......~~~~~~~~~###         \n    ""                ###~~~~~~~~~~~~~~~~###            \n   """"                  ################               \n    """"""                                         ""   \n      """""""                                   """"""  \n                                                 ""     \n                                                        ',"                       #2222222222222222#               \n                       #                #               \n                      #                  #              \n                    ##xxxxxxxxxxxxxxxxxxxx##            \n                 ###                        ###         \n         ########                              ##       \n#########                                        #      \n1                                                 #     \n1   @                                             #     \n1                                                 #     \n1                                                 #     \n#######                                           #     \n       #####                                     #      \n            ###                                 #       \n               ###                             #        \n                  ####                      ###         \n                      ###                ###            \n                         ################               \n                                                        \n                                                        \n                                                        \n                                                        ",new Map([["1","training"],["2","swordOnly"]]),new Map([["~","#0000FF"],['"',"#00FF00"]]),new Map,"#020302","",new Z((function(t){t.targets.length>0?t.tick=9:(t.tick--,t.tick<=0&&(t.targets.push(new B(new D(31,13),"O",1,1)),t.tick=9))}),(function(){return new D(0,0)}),(function(t){return"#00FF00"})),(function(t,e){return null!=t.currentMapData.spawner&&(0!==t.currentMapData.spawner.targets.length&&1090!==t.persistedData.coins)}),"#FF8800"),nt=new C('                       #~~~~.~~~~~~~~~~#                \n          """          #~~.....~~~~~~~~~#    """        \n        """           #~~~........~~~~~~~#    """"      \n                    ##~~..............~~~~##            \n                 ###........................#           \n         ########............................#          \n#########.....................................#         \n...............................................#        \n...............................................#        \n...............................................#        \n...............................................#        \n#######........................................#        \n       #####...................................#        \n            ###...............................#         \n               ###...........................#          \n                  #~~~...........~~~~~~~~~~~#           \n        ""         ##~~~.......~~~~~~~~~~~~#            \n       """"          #~~~~.....~~~~~~~~~~~#   ""        \n       """"""         #~~~~...~~~~~~~~~~~#     """      \n                      #~~~~...~~~~~~~~~~~#    """       \n                      #~~~~...~~~~~~~~~~~#     ""       \n                       #~~~~.~~~~~~~~~~~#               ',"                       #111111111111111#                \n                       #                #               \n                      #                  #              \n                    ##                    ##            \n                 ###                        #           \n         ########                            #          \n#########                                     #         \n3                                              #        \n3                                              #        \n3                                              #        \n3                                              #        \n#######                                        #        \n       #####                                   #        \n            ###                               #         \n               ###                           #          \n                  #                         #           \n                   ##                      #            \n                     #                    #             \n                      #     @            #              \n                      #                  #              \n                      #                  #              \n                       #2222222222222222#               ",new Map([["1","hitSword"],["2","leaveRock"],["3","rotating"]]),new Map([["~","#0000FF"],['"',"#00FF00"]]),new Map,"#020302","",new Z((function(t){t.targets.push(new B(new D(26+t.tick,-1),"v",1,1)),t.targets.push(new B(new D(-1,7+t.tick),">",1,1)),t.tick=(t.tick+1)%4}),(function(t){return"v"===t?new D(0,1):new D(1,0)}),(function(t){return"#00FFFF"})),null,""),it=new C('                   #................#                   \n        """       #.................#             ""    \n      """"       #...................#           """"   \n                #.....................##           ""   \n               #........................##              \n              #...........................###           \n             #...............................###########\n            #...........................................\n            #...........................................\n            #...........................................\n            #...........................................\n            #....................................#######\n             #.................................##       \n              #...............................#         \n               ##............................#          \n                 ##.........................#           \n                   ##~....................~#            \n """"                #~~~...............~~~#            \n   """"               #~~~~..........~~~~~#             \n                       #~~~~~~~~~~~~~~~~~~#             \n                       #~~~~~~~~~~~~~~~~~#              \n                       #~~~~~~~~~~~~~~~~#               ',"                   #1111111111111111#                   \n                  #                 #                   \n                 #                   #                  \n                #                     ##                \n               #                        ##              \n              #                           ###           \n             #                               ###########\n            #                                          3\n            #                                     @    3\n            #                                          3\n            #                                          3\n            #                                    #######\n             #                                 ##       \n              #                               #         \n               ##                            #          \n                 ##                         #           \n                   ##                      #            \n                     #                     #            \n                      #                   #             \n                       #                  #             \n                       #                 #              \n                       #                #               ",new Map([["1","swordTreasure2"],["3","swordOnly"]]),new Map([["~","#0000FF"],['"',"#00FF00"]]),new Map,"#020302","",new Z((function(t){2!==t.tick&&(t.targets.push(new B(new D(56,7+t.tick),"<",1,1)),t.targets.push(new B(new D(56,9+t.tick),"<",1,1))),t.tick=(t.tick+1)%3}),(function(t){return new D(-1,0)}),(function(t){return"#00FFFF"})),null,""),rt=new C("                                                        \n                                             ~~~~       \n    ~~~~                                       ~~~~     \n      ~~~~~~                                            \n              #############################             \n         #####.............................####         \n       ##......................................##       \n      #..........................................#      \n     #............................................#     \n     #............................................#     \n     #............................................#     \n     #............................................#     \n      #..........................................#      \n       ##......................................##       \n         #####............................#####         \n              ####....................####              \n                  #..................#       ~~         \n      ~~~~~~      #..................#        ~~~       \n   ~~~~~~~        #..................#                  \n      ~~~~~~      #..................#                  \n                  #..................#                  \n                   #................#                   ","                                                        \n                                                        \n                                                        \n                                                        \n              #############################             \n         #####                             ####         \n       ##                                      ##       \n      #                                          #      \n     #          $                                 #     \n     #        $$$$                                #     \n     #        $  $                    \\           #     \n     #         $$                                 #     \n      #                                          #      \n       ##                                      ##       \n         #####                            #####         \n              ####                    ####              \n                  #                  #                  \n                  #                  #                  \n                  #                  #                  \n                  #                  #                  \n                  #                  #                  \n                   #1111111111111111#                   ",new Map([["1","rotating"]]),new Map([["#","#555555"],["~","#0000FF"]]),new Map,"#050500","",null,null,""),at=new C("                           #~~...~~#                    \n                           #~~...~~#                    \n        ~~~                #~~...~~#                    \n      ~~~~                #~~~....~~#                   \n                         #~~~......~~#        ~~~~      \n                        #~~~........~~#      ~~~~~~~    \n                        #~~..........~#         ~~      \n                        #~...........~#                 \n     ~~~                #~...........~#                 \n      ~~~               #.............#                 \n                        #.............#                 \n                        #.............#                 \n                        #.............#                 \n                        #.............#                 \n                        #.............#                 \n                        #~~~.....~~~~~#                 \n          ~~            #~~~.....~~~~~#   ~~~~          \n        ~~~~~~          #~~~...~~~~~~~#     ~~~~        \n           ~~           #~~~...~~~~~~~#                 \n                        #~~...~~~~~~~~#                 \n                        #~~...~~~~~~~~#                 \n                       #~~~~.~~~~~~~~~~#                ","                           #2222222#                    \n                           #       #                    \n                           #       #                    \n                          #         #                   \n                         #           #                  \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #             #                 \n                        #   @         #                 \n                        #             #                 \n                       #111111111111111#                ",new Map([["1","swordOnly"],["2","lastChallenge"]]),new Map([["~","#0000FF"],['"',"#00FF00"]]),new Map,"#020302","",new Z((function(t){0===t.tick&&(t.targets.push(new B(new D(30,-1),"O",3,3)),t.targets.push(new B(new D(31,-1),"O",3,3)),t.targets.push(new B(new D(32,-1),"O",3,3))),t.tick=(t.tick+1)%3}),(function(t){return new D(0,1)}),(function(t){return 3===t?"#00FF00":2===t?"#FFAA00":"#FF0000"})),null,""),st=new C("                                                        \n                                                        \n##################################                      \n..................................##                    \n....................................##                  \n......................................#                 \n.......................................#                \n########################................#               \n                        #................#              \n      ~~~              #..................#             \n                     ##....................#            \n#####################.......................#           \n............................................#           \n............................................#           \n............................................#           \n####################.......................#            \n                    #######...........~~~~#             \n           ~~~             ##........~~~~#              \n         ~~~~                #.......~~~#               \n                             #.....~~~##                \n                            #.....~~##                  \n                           #~~...~~#                    ","                                                        \n                                                        \n##################################                      \n1                                 ##                    \n1                                   ##                  \n1                                     #                 \n1                                      #                \n########################                #               \n                        #                #              \n                       #                  #             \n                     ##                    #            \n#####################                       #           \n1                                           #           \n1                                           #           \n1                                           #           \n####################                       #            \n                    #######               #             \n                           ##            #              \n                             #          #               \n                             #        ##                \n                            #       ##                  \n                           #2222222#                    ",new Map([["2","hitSword"],["1","treasure"]]),new Map([["~","#0000FF"],['"',"#00FF00"]]),new Map,"#020302","",new Z((function(t){t.tick%8===0||t.tick%8===1?(t.targets.push(new B(new D(-1,3),"O",1,1)),t.targets.push(new B(new D(-1,4),"O",1,1)),t.targets.push(new B(new D(-1,5),"O",1,1))):t.tick%6===2||7===t.tick?(t.targets.push(new B(new D(-1,3),"O",1,1)),t.targets.push(new B(new D(-1,4),"O",1,1)),t.targets.push(new B(new D(-1,6),"O",1,1))):t.tick%6===3||6===t.tick?(t.targets.push(new B(new D(-1,3),"O",1,1)),t.targets.push(new B(new D(-1,5),"O",1,1)),t.targets.push(new B(new D(-1,6),"O",1,1))):(t.targets.push(new B(new D(-1,4),"O",1,1)),t.targets.push(new B(new D(-1,5),"O",1,1)),t.targets.push(new B(new D(-1,6),"O",1,1))),t.targets.push(new B(new D(-1,11+t.tick%2),">",1,1)),t.targets.push(new B(new D(-1,13+t.tick%2),">",1,1)),t.tick=(t.tick+1)%8}),(function(t){return new D(1,0)}),(function(t){return"#00FFFF"})),null,""),ot=new C("########################################################\n#......................................................#\n#......................................................#\n#.......................................................\n#.......................................................\n#.......................................................\n#.......................................................\n#......................................................#\n#......................................................#\n#......................................................#\n#......................................................#\n#......................................................#\n#.......................................................\n#.......................................................\n#.......................................................\n#......................................................#\n#......................................................#\n#......................................................#\n#......................................................#\n#......................................................#\n#......................................................#\n########################################################","########################################################\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$1\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$1\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$1\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$1\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$1\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$1\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$1\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#\n########################################################",new Map([["1","lastChallenge"]]),new Map([["#","#555555"],["~","#0000FF"]]),new Map,"#050500","",null,null,""),$t=new Map([["bateau",J],["mission",Y],["outside",K],["training",X],["spike",Q],["spike2",G],["swordTreasure",tt],["leaveRock",et],["swordOnly",nt],["rotating",it],["swordTreasure2",rt],["hitSword",at],["lastChallenge",st],["treasure",ot]]);function ht(t){return t.charAt(0).toUpperCase()+t.substr(1)}var lt=new Map([["7",new D(45,0)],["8",new D(48,0)],["9",new D(51,0)],["4",new D(45,1)],["5",new D(48,1)],["6",new D(51,1)],["1",new D(45,2)],["2",new D(48,2)],["3",new D(51,2)]]),ut=new Intl.NumberFormat("fr-CH",{style:"decimal",minimumFractionDigits:0}),ct=function(){function t(){Object($.a)(this,t),this.items=new Map,this.projectiles=new Array,this.spawner=null}return Object(u.a)(t,[{key:"print",value:function(){var t={items:{},projectiles:[],spawner:this.spawner.print()},e=!0,n=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value,$=Object(o.a)(s,2),h=$[0],l=$[1],u=[],c=!0,p=!1,v=void 0;try{for(var f,d=l[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var y=f.value;u.push({x:y.x,y:y.y,usage:y.usage})}}catch(x){p=!0,v=x}finally{try{c||null==d.return||d.return()}finally{if(p)throw v}}t.items[h]=u}}catch(x){n=!0,i=x}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}var w=!0,g=!1,m=void 0;try{for(var _,M=this.projectiles[Symbol.iterator]();!(w=(_=M.next()).done);w=!0){var F=_.value;t.projectiles.push({x:F.x,y:F.y,vx:F.vx,vy:F.vy,symbol:F.symbol,power:F.power})}}catch(x){g=!0,m=x}finally{try{w||null==M.return||M.return()}finally{if(g)throw m}}return t}},{key:"copy",value:function(){var e=new t;e.items=new Map;var n=!0,i=!1,r=void 0;try{for(var a,s=this.items[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var $=a.value,h=Object(o.a)($,2),l=h[0],u=h[1],c=[],p=!0,v=!1,f=void 0;try{for(var d,y=u[Symbol.iterator]();!(p=(d=y.next()).done);p=!0){var w=d.value;c.push(w.copy())}}catch(b){v=!0,f=b}finally{try{p||null==y.return||y.return()}finally{if(v)throw f}}e.items.set(l,c)}}catch(b){i=!0,r=b}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}e.projectiles=[];var g=!0,m=!1,_=void 0;try{for(var M,F=this.projectiles[Symbol.iterator]();!(g=(M=F.next()).done);g=!0){var x=M.value;e.projectiles.push(x.copy())}}catch(b){m=!0,_=b}finally{try{g||null==F.return||F.return()}finally{if(m)throw _}}return null!=this.spawner&&(e.spawner=this.spawner.copy()),e}}],[{key:"parse",value:function(e){if(null===e)return null;var n=new t;for(var i in n.items=new Map,e.items)if(e.items.hasOwnProperty(i)){var r=[],a=e.items[i],s=!0,o=!1,$=void 0;try{for(var h,l=a[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var u=h.value;r.push(new S(u.x,u.y,u.usage))}}catch(w){o=!0,$=w}finally{try{s||null==l.return||l.return()}finally{if(o)throw $}}n.items.set(i,r)}n.projectiles=[];var c=!0,p=!1,v=void 0;try{for(var f,d=e.projectiles[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var y=f.value;n.projectiles.push(new P(y.x,y.y,y.vx,y.vy,y.symbol,y.power))}}catch(w){p=!0,v=w}finally{try{c||null==d.return||d.return()}finally{if(p)throw v}}return n.spawner=V.parse(e.spawner),n}}]),t}(),pt=function(){function t(){Object($.a)(this,t),this.weapon="",this.rocks=0,this.coins=0,this.heroPosition=new D(0,0),this.mapData=new Map,this.currentMapName=""}return Object(u.a)(t,[{key:"print",value:function(){var t={weapon:this.weapon,rocks:this.rocks,coins:this.coins,heroPosition:{x:this.heroPosition.x,y:this.heroPosition.y},mapData:{},currentMapName:this.currentMapName},e=!0,n=!1,i=void 0;try{for(var r,a=this.mapData[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value,$=Object(o.a)(s,2),h=$[0],l=$[1];t.mapData[h]=l.print()}}catch(u){n=!0,i=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return t}},{key:"copy",value:function(){var e=new t;e.weapon=this.weapon,e.rocks=this.rocks,e.coins=this.coins,e.heroPosition=this.heroPosition.copy(),e.mapData=new Map;var n=!0,i=!1,r=void 0;try{for(var a,s=this.mapData[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var $=a.value,h=Object(o.a)($,2),l=h[0],u=h[1];e.mapData.set(l,u.copy())}}catch(c){i=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e.currentMapName=this.currentMapName,e}}],[{key:"parse",value:function(e){if(null===e)return null;if(void 0===e.heroPosition)return null;var n=new t;for(var i in n.weapon=e.weapon,n.rocks=e.rocks,n.coins=e.coins,n.heroPosition=new D(e.heroPosition.x,e.heroPosition.y),n.mapData=new Map,e.mapData)if(e.mapData.hasOwnProperty(i)){var r=ct.parse(e.mapData[i]);null!=r&&n.mapData.set(i,r)}return n.currentMapName=e.currentMapName,n}}]),t}(),vt=function(){function t(){Object($.a)(this,t),this.pressed=void 0,this.engine=void 0,this.charWidth=void 0,this.currentStatus=void 0,this.isThrowing=void 0,this.isMenuOpen=void 0,this.isMainMenu=void 0,this.menuPosition=0,this.mainMenu=new Array,this.gameMenu=new Array,this.gameOverMessage=void 0,this.lastSave=null,this.persistedData=new pt,this.initialPersistedData=null,this.fps=void 0,this.currentMap=null,this.currentMapData=new ct,this.engine=new W("canvas",460,480,16,"Inconsolata, monospace",!1,0),this.pressed=new Map([["1",!1],["2",!1],["3",!1],["4",!1],["5",!1],["6",!1],["7",!1],["8",!1],["9",!1],[" ",!1],["Shift",!1],["Escape",!1],["+",!1],["-",!1]]),this.currentStatus="",this.charWidth=this.engine.get_char_width(),this.isThrowing=!1,this.gameOverMessage="",this.isMenuOpen=!1,this.isMainMenu=!0,this.fps=6,this.parse_all_maps(),this.refresh_menu(!0)}return Object(u.a)(t,[{key:"parse_all_maps",value:function(){this.initialPersistedData=new pt,this.initialPersistedData.mapData=new Map;var t=!0,e=!1,n=void 0;try{for(var i,r=$t[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=Object(o.a)(a,2),$=s[0],h=s[1];h.parse($);var l=new ct;l.items=new Map,l.projectiles=[],l.spawner=new V([],0);var u=!0,c=!1,p=void 0;try{for(var v,f=h.initialItemPositions[Symbol.iterator]();!(u=(v=f.next()).done);u=!0){var d=v.value,y=Object(o.a)(d,2),w=y[0],g=y[1],m=[],_=!0,M=!1,F=void 0;try{for(var x,b=g[Symbol.iterator]();!(_=(x=b.next()).done);_=!0){var k=x.value;m.push(k.copy())}}catch(O){M=!0,F=O}finally{try{_||null==b.return||b.return()}finally{if(M)throw F}}l.items.set(w,m)}}catch(O){c=!0,p=O}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}this.initialPersistedData.mapData.set($,l)}}catch(O){e=!0,n=O}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}this.initialPersistedData.coins=0,this.initialPersistedData.weapon="",this.initialPersistedData.rocks=0,this.initialPersistedData.currentMapName="bateau",this.initialPersistedData.heroPosition=$t.get("bateau").start}},{key:"draw",value:function(){this.isMainMenu?(this.engine.clear(f),this.draw_main_menu()):(null!=this.currentMap&&this.engine.clear(this.currentMap.backgroundColor),this.draw_all())}},{key:"do_update",value:function(){this.isMenuOpen||this.isMainMenu?this.update_menu():this.update_on_map()}},{key:"get_string_from",value:function(t,e,n){return null!=this.currentMap?this.currentMap.map.substr(57*e+t,n):""}},{key:"to_screen_coord",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new D(this.charWidth*t+n,16*e+i)}},{key:"update_current_status",value:function(t){var e=!1,n=this.currentStatus;if(null!=this.currentMapData){var i=!0,r=!1,a=void 0;try{for(var s,$=this.currentMapData.items[Symbol.iterator]();!(i=(s=$.next()).done);i=!0){for(var h=s.value,l=Object(o.a)(h,2),u=l[0],c=l[1],p=0;p<c.length;p++)if(c[p].equals(t)){if("$"===u)this.persistedData.coins++,c.splice(p,1),n="> 1 $"+z.get("fr").get("M");else{var v=A.get("fr").get(u);n=T.get("fr")+v.text,c[p].usage>1&&(n+=" (x"+c[p].usage+")")}e=!0;break}if(e)break}}catch(f){r=!0,a=f}finally{try{i||null==$.return||$.return()}finally{if(r)throw a}}this.currentStatus=e?n:"","treasure"!==this.persistedData.currentMapName||(this.currentStatus="> Merci d'avoir jou\xe9!")}}},{key:"drop_current_slot_item_at",value:function(t,e,n){""!==e&&(this.currentMapData.items.has(e)||this.currentMapData.items.set(e,[]),this.currentMapData.items.get(e).push(new S(t.x,t.y,n)))}},{key:"try_pick_or_drop_item",value:function(t){if(this.pressed.get("5")){var e=!1,n=this.currentStatus,i=!0,r=!1,a=void 0;try{for(var s,$=this.currentMapData.items[Symbol.iterator]();!(i=(s=$.next()).done);i=!0){for(var h=s.value,l=Object(o.a)(h,2),u=l[0],c=l[1],p=A.get("fr").get(u),v=0;v<c.length;v++)if(c[v].equals(t)){x.indexOf(u)>-1?(""!==this.persistedData.weapon&&this.drop_current_slot_item_at(c[v],this.persistedData.weapon,-1),this.persistedData.weapon=u):b.indexOf(u)>-1&&this.persistedData.rocks++,n="> "+ht(p.text),c[v].usage>1&&(n+=" (x"+c[v].usage+")"),n+=z.get("fr").get(p.genre),c.splice(v,1),e=!0;break}if(e)break}}catch(f){r=!0,a=f}finally{try{i||null==$.return||$.return()}finally{if(r)throw a}}return this.currentStatus=e?n:"",!0}return!1}},{key:"try_enter_or_exit",value:function(t){var e=this.get_symbol_at(t);return">"!==e&&"<"!==e?[!1,new D(0,0),""]:this.do_teleport(e,new j(t.x,t.y,0),t,t)}},{key:"move_hero",value:function(t,e,n){var i=this.try_teleport(t,e);if(i[0])return this.change_map(i[2],!0),t=i[1],this.persistedData.heroPosition=i[1],[t,!0];var r=this.try_hit_target(t,n),a=Object(o.a)(r,1)[0];return""===a&&(t=e,this.update_current_status(t)),[t,!1]}},{key:"collides_with_obstacle",value:function(t){if(null==this.currentMap)return!1;if(void 0===this.currentMap.obstacleVisible)return!1;var e=!0,n=!1,i=void 0;try{for(var r,a=this.currentMap.obstacles[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value,$=Object(o.a)(s,2),h=$[0],l=$[1];if(this.currentMap.obstacleVisible(this,h)){var u=!0,c=!1,p=void 0;try{for(var v,f=l[Symbol.iterator]();!(u=(v=f.next()).done);u=!0){var d=v.value;if(t.equals(d))return!0}}catch(y){c=!0,p=y}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}}}}catch(y){n=!0,i=y}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return!1}},{key:"get_future_position",value:function(t){var e=t.x,n=t.y;(this.pressed.get("1")||this.pressed.get("2")||this.pressed.get("3"))&&n++,(this.pressed.get("7")||this.pressed.get("8")||this.pressed.get("9"))&&n--,(this.pressed.get("1")||this.pressed.get("4")||this.pressed.get("7"))&&e--,(this.pressed.get("3")||this.pressed.get("6")||this.pressed.get("9"))&&e++;var i=new D(e,n),r=m,a=this.get_symbol_at(i);return r.indexOf(a)>-1||null==this.currentMap?[i,i,""]:t.y!==i.y?(a=this.currentMap.get_symbol_at(t.x,i.y),r.indexOf(a)>-1?[new D(t.x,i.y),i,""]:(i.x!==t.x&&(a=this.currentMap.get_symbol_at(i.x,t.y)),r.indexOf(a)>-1?[new D(i.x,t.y),i,""]:[t,i,""])):(a=this.currentMap.get_symbol_at(i.x,t.y),r.indexOf(a)>-1?[new D(i.x,t.y),i,""]:[t,i,""])}},{key:"change_map",value:function(t,e){this.currentMap=$t.get(t),this.persistedData.currentMapName=t,this.currentMapData=this.persistedData.mapData.get(t),e&&null!=this.currentMapData.spawner&&this.currentMapData.spawner.reset()}},{key:"save_to_memory",value:function(){this.lastSave=this.persistedData.copy()}},{key:"load_last_save",value:function(){null!=this.lastSave&&(this.persistedData=this.lastSave.copy()),this.change_map(this.persistedData.currentMapName,!1)}},{key:"try_teleport",value:function(t,e){if(null!=this.currentMap){var n=!0,i=!1,r=void 0;try{for(var a,s=this.currentMap.teleports[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var $=a.value,h=Object(o.a)($,2),l=h[0],u=h[1];if("<"!==l&&">"!==l){var c=!0,p=!1,v=void 0;try{for(var f,d=u[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var y=f.value;if(y.equals(e))return this.do_teleport(l,y,t,e)}}catch(w){p=!0,v=w}finally{try{c||null==d.return||d.return()}finally{if(p)throw v}}}}}catch(w){i=!0,r=w}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return[!1,new D(0,0),""]}},{key:"do_teleport",value:function(t,e,n,i){if(null==this.currentMap)return[!1,new D(0,0),""];var r,a,s=this.currentMap.teleportMap.get(t),o=$t.get(s);">"===t?(r=o.teleports.get("<"),a=0):"<"===t?(r=o.teleports.get(">"),a=0):(r=o.teleports.get(t),a=e.id);var $=r[a],h=$.x+(i.x-n.x),l=$.y+(i.y-n.y);return"#"===o.get_symbol_at(h,l)&&("#"===o.get_symbol_at($.x,l)?l=$.y:h=$.x),[!0,new D(h,l),s]}},{key:"try_hit_target",value:function(t,e){if(null==this.currentMap||null==this.currentMapData.spawner||null===this.currentMap.targetSpawner)return["",""];for(var n=this.currentMapData.spawner.targets,i=0;i<n.length;){var r=n[i];if(r.pos.equals(e)){var a=this.get_weapon_damage();return"O"===r.symbol&&0!==a?(r.pv-=a,r.pv<=0?(n.splice(i,1),["hit",r.symbol]):["push",r.symbol]):["push",r.symbol]}i++}return["",""]}},{key:"update_targets",value:function(t){return null!=this.currentMap&&null!=this.currentMap.targetSpawner&&null!=this.currentMapData&&null!=this.currentMapData.spawner?this.currentMap.targetSpawner.update(this,this.currentMapData.spawner,t):t}},{key:"move_projectiles",value:function(){if(null!=this.currentMap)for(var t=0;t<this.currentMapData.projectiles.length;){var e=this.currentMapData.projectiles[t],n=e.x+e.vx,i=e.y+e.vy;if(i>=22||i<0||n<0||n>=56){var r=this.try_teleport(e,e),a=Object(o.a)(r,3),s=a[0],$=a[1],h=a[2];if(s){var l=this.persistedData.mapData.get(h);this.projectile2item(l,new D($.x+e.vx,$.y+e.vy),t);continue}}var u=this.currentMap.get_symbol_at(n,i);-1!==m.indexOf(u)?(e.x=n,e.y=i,t++):this.projectile2item(this.currentMapData,e,t)}}},{key:"move_targets_or_die",value:function(t){t=this.update_targets(t);var e=this.get_symbol_at(t);-1===m.indexOf(e)?this.gameOverMessage=I.get("fr").get(e):this.persistedData.heroPosition=t}},{key:"update_menu",value:function(){var t;if(t=this.isMainMenu?this.mainMenu:this.gameMenu,this.pressed.get("8")){var e=this.menuPosition;if(e>0)do{e--}while(-1!==e&&!t[e][2]);-1!==e&&(this.menuPosition=e)}if(this.pressed.get("2")){var n=this.menuPosition;if(n<t.length)do{n++}while(n!==t.length&&!t[n][2]);n!==t.length&&(this.menuPosition=n)}this.pressed.get("5")&&t[this.menuPosition][1](this),!this.isMainMenu&&this.pressed.get("Escape")&&(this.isMenuOpen=!1)}},{key:"update_on_map",value:function(){if(""===this.gameOverMessage)if(this.pressed.get("+")&&this.fps++,this.pressed.get("-")&&this.fps--,this.pressed.get("Shift")&&this.persistedData.rocks>0)this.isThrowing=!this.isThrowing;else{if(this.pressed.get("Escape"))return this.isMenuOpen=!0,this.menuPosition=0,void this.refresh_menu(!1);var t=this.get_future_position(this.persistedData.heroPosition),e=this.try_enter_or_exit(t[0]);if(void 0!==e&&e[0])return this.change_map(e[2],!0),this.persistedData.heroPosition=e[1],void this.save_to_memory();if(this.try_pick_or_drop_item(this.persistedData.heroPosition))return this.move_projectiles(),void this.move_targets_or_die(this.persistedData.heroPosition);if(this.isThrowing&&this.persistedData.rocks>0){var n=A.get("fr").get("*");this.currentStatus="> "+ht(n.text+H.get("fr").get(n.genre));var i=this.persistedData.heroPosition.x,r=this.persistedData.heroPosition.y,a=t[1].x-i,s=t[1].y-r;0===a&&0===s||(this.currentMapData.projectiles.push(new P(i,r,a,s,"*",1)),this.persistedData.rocks--,this.isThrowing=!1,this.move_projectiles(),this.move_targets_or_die(this.persistedData.heroPosition))}else{if(""!==t[2])return this.currentStatus=t[2],this.move_projectiles(),void this.move_targets_or_die(this.persistedData.heroPosition);if(!this.collides_with_obstacle(t[0])){var $=this.move_hero(this.persistedData.heroPosition,t[0],t[1]),h=Object(o.a)($,2),l=h[0],u=h[1];this.persistedData.heroPosition=l,u||this.move_projectiles(),this.move_targets_or_die(this.persistedData.heroPosition),u&&""===this.gameOverMessage&&this.save_to_memory()}}}else this.pressed.get(" ")&&(this.gameOverMessage="",this.load_last_save())}},{key:"draw_map",value:function(){if(null!=this.currentMap){for(var t=0;t<22;t++)for(var e=0;e<56;){var n=0,i=this.currentMap.get_symbol_at(e,t);if(" "!==i&&"\n"!==i&&void 0!==i){for(;;){if(n++,this.currentMap.get_symbol_at(e+n,t)!==i)break}var r=this.to_screen_coord(e,t+3),a=this.get_string_from(e,t,n),s=void 0;void 0!==this.currentMap.tile2color&&(s=this.currentMap.tile2color.get(i)),void 0===s&&(s=y.get(i)),void 0===s&&(s=this.currentMap.textColor),this.engine.rect(r,a.length*this.charWidth,16,this.currentMap.backgroundColor),this.engine.text(a,r,s),e+=n}else e++}if(void 0!==this.currentMap.texts){var $=this.currentMap.texts.get("fr");if(void 0!==$){var h=!0,l=!1,u=void 0;try{for(var c,p=$[Symbol.iterator]();!(h=(c=p.next()).done);h=!0){var v=c.value,f=Object(o.a)(v,2),d=f[0],w=f[1];this.engine.text(d,this.to_screen_coord(w.x,w.y),this.currentMap.textColor)}}catch(g){l=!0,u=g}finally{try{h||null==p.return||p.return()}finally{if(l)throw u}}}}}}},{key:"draw_projectiles",value:function(){if(null!=this.currentMap){var t=!0,e=!1,n=void 0;try{for(var i,r=this.currentMapData.projectiles[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=this.to_screen_coord(a.x,a.y+3);this.engine.rect(s,this.charWidth,16,this.currentMap.backgroundColor),this.engine.text(a.symbol,s,k.get(a.symbol))}}catch(o){e=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}},{key:"draw_targets",value:function(){if(null!=this.currentMap&&null!=this.currentMap.targetSpawner&&null!=this.currentMapData.spawner){var t=!0,e=!1,n=void 0;try{for(var i,r=this.currentMapData.spawner.targets[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=this.to_screen_coord(a.pos.x,a.pos.y+3);this.engine.rect(s,this.charWidth,16,this.currentMap.backgroundColor),this.engine.text(a.symbol,s,this.currentMap.targetSpawner.pv2color(a.pv))}}catch(o){e=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}},{key:"draw_obstacles",value:function(){if(null==this.currentMap)return!1;var t=!0,e=!1,n=void 0;try{for(var i,r=this.currentMap.obstacles[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=Object(o.a)(a,2),$=s[0],h=s[1];if(this.currentMap.obstacleVisible(this,$)){var l=!0,u=!1,c=void 0;try{for(var p,v=h[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var f=p.value,d=this.to_screen_coord(f.x,f.y+3);this.engine.rect(d,this.charWidth,16,this.currentMap.backgroundColor),this.engine.text($,d,this.currentMap.obstacleColor)}}catch(y){u=!0,c=y}finally{try{l||null==v.return||v.return()}finally{if(u)throw c}}}}}catch(y){e=!0,n=y}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}},{key:"draw_character",value:function(t,e,n){null!=this.currentMap&&(this.engine.rect(e,this.charWidth,16,this.currentMap.backgroundColor),this.engine.text(t,e,n))}},{key:"draw_hero",value:function(){this.draw_character("@",this.to_screen_coord(this.persistedData.heroPosition.x,this.persistedData.heroPosition.y+3),M.get("@"))}},{key:"draw_items",value:function(){if(null!=this.currentMap){var t=!0,e=!1,n=void 0;try{for(var i,r=this.currentMapData.items[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=Object(o.a)(a,2),$=s[0],h=s[1],l=!0,u=!1,c=void 0;try{for(var p,v=h[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var f=p.value,d=this.to_screen_coord(f.x,f.y+3),y=F.get($);this.engine.rect(d,this.charWidth,16,this.currentMap.backgroundColor),this.engine.text($,d,y)}}catch(w){u=!0,c=w}finally{try{l||null==v.return||v.return()}finally{if(u)throw c}}}}catch(w){e=!0,n=w}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}},{key:"get_weapon_damage",value:function(){return O.get(this.persistedData.weapon)}},{key:"get_symbol_at",value:function(t){return null==this.currentMap?"":this.currentMap.get_symbol_at(t.x,t.y)}},{key:"hits_projectile",value:function(t){for(var e=0;e<this.currentMapData.projectiles.length;e++){var n=this.currentMapData.projectiles[e];if(n.equals(t))return[e,n.power]}return[-1,0]}},{key:"projectile2item",value:function(t,e,n){var i=this.currentMapData.projectiles[n];t.items.has(i.symbol)||t.items.set(i.symbol,[]);var r=t.items.get(i.symbol),a=!1,s=!0,o=!1,$=void 0;try{for(var h,l=r[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var u=h.value;if(u.equals(i)){u.usage++,a=!0;break}}}catch(c){o=!0,$=c}finally{try{s||null==l.return||l.return()}finally{if(o)throw $}}a||r.push(new S(e.x,e.y,1)),this.currentMapData.projectiles.splice(n,1)}},{key:"draw_overlay",value:function(){this.engine.text(this.currentStatus,this.to_screen_coord(2,1),"#FFFFFF");var t=ut.format(this.persistedData.coins)+" $";this.engine.text(t,this.to_screen_coord(56-t.length-7,1),F.get("$")),this.engine.text("[esc]",this.to_screen_coord(50,1),"#555555");var e=26,n=!0,i=!1,r=void 0;try{for(var a,s=lt[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var $=a.value,h=Object(o.a)($,2),l=h[0],u=h[1];this.isThrowing?this.engine.text(l,this.to_screen_coord(u.x,u.y+e),"#FF00FF"):this.pressed.get(l)?this.engine.text(l,this.to_screen_coord(u.x,u.y+e),"#FFFFFF"):this.engine.text(l,this.to_screen_coord(u.x,u.y+e),"#555555")}}catch(p){i=!0,r=p}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}if(""!==this.persistedData.weapon&&this.engine.text("- "+ht(A.get("fr").get(this.persistedData.weapon).text),this.to_screen_coord(3,e),"#FFFFFF"),0!==this.persistedData.rocks&&this.engine.text("- "+ht(A.get("fr").get("*").text)+" (x"+this.persistedData.rocks+")",this.to_screen_coord(3,27),"#FFFFFF"),this.persistedData.rocks>0){var c="\u21e7 "+E.get("fr");this.isThrowing?this.engine.text(c,this.to_screen_coord(29,27,-2),"#FF00FF"):this.engine.text(c,this.to_screen_coord(29,27,-2),"#FFFFFF")}}},{key:"draw_message",value:function(){if(""!==this.gameOverMessage&&null!=this.currentMap){var t=N.get("fr");this.engine.rect(this.to_screen_coord(13,10),30*this.charWidth,112,this.currentMap.backgroundColor),this.engine.text(" **************************** ",this.to_screen_coord(13,10),"#FFFFFF");for(var e=11;e<16;e++)this.engine.text("*                            *",this.to_screen_coord(13,e),"#FFFFFF");this.engine.text(" **************************** ",this.to_screen_coord(13,16),"#FFFFFF"),this.engine.text(this.gameOverMessage,this.to_screen_coord(28-this.gameOverMessage.length/2,12),"#FFFFFF"),this.engine.text(t,this.to_screen_coord(28-t.length/2,14),"#FFFFFF")}}},{key:"draw_main_menu",value:function(){var t=0,e=!0,n=!1,i=void 0;try{for(var r,a=this.mainMenu[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value,$=Object(o.a)(s,3),h=$[0],l=$[2],u=void 0,c=10,p=void 0;this.menuPosition===t?u="> "+h:(u=h,c+=2),p=l?"#FFFFFF":"#555555",this.engine.text(u,this.to_screen_coord(c,12+t),p),t++}}catch(v){n=!0,i=v}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"draw_menu",value:function(){if(this.isMenuOpen&&null!=this.currentMap){var t;for(this.engine.rect(this.to_screen_coord(13,10),30*this.charWidth,112,this.currentMap.backgroundColor),this.engine.text(" **************************** ",this.to_screen_coord(13,10),"#FFFFFF"),t=11;t<16;t++)this.engine.text("*                            *",this.to_screen_coord(13,t),"#FFFFFF");this.engine.text(" **************************** ",this.to_screen_coord(13,16),"#FFFFFF"),t=0;var e=!0,n=!1,i=void 0;try{for(var r,a=this.gameMenu[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value,$=Object(o.a)(s,3),h=$[0],l=$[2],u=void 0,c=23,p=void 0;this.menuPosition===t?u="> "+h:(u=h,c+=2),p=l?"#FFFFFF":"#555555",this.engine.text(u,this.to_screen_coord(c,12+t),p),t++}}catch(v){n=!0,i=v}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}}},{key:"draw_all",value:function(){this.draw_map(),this.draw_items(),this.draw_hero(),this.draw_projectiles(),this.draw_targets(),this.draw_obstacles(),this.draw_overlay(),this.draw_message(),this.draw_menu()}},{key:"resize",value:function(t,e){this.engine.resize(t,e),this.draw()}},{key:"refresh_menu",value:function(e){var n=t.get_from_storage();this.mainMenu=[[L.get("fr"),function(e){return t.clear_and_start_tt(e)},!0],[R.get("fr"),function(e){return t.load_save(e,null!=n?n:new pt)},null!=n]],this.gameMenu=[[U.get("fr"),function(e){return t.save_to_storage(e)},!0],[R.get("fr"),function(e){return t.load_from_storage(e)},null!=n],[q.get("fr"),function(e){return t.open_main_menu(e)},!0]],e&&(this.mainMenu[1][2]?this.menuPosition=1:this.menuPosition=0)}}],[{key:"load_save",value:function(t,e){t.persistedData=e,t.isMainMenu=!1,t.isMenuOpen=!1,null!=t.persistedData&&t.change_map(t.persistedData.currentMapName,!1),t.isMenuOpen=!1,t.save_to_memory()}},{key:"load_from_storage",value:function(e){var n=t.get_from_storage();null!=n&&t.load_save(e,n)}},{key:"save_to_storage",value:function(t){if(null!=t.persistedData){var e=JSON.stringify(t.persistedData.print());window.localStorage.setItem("save",e)}t.isMenuOpen=!1}},{key:"clear_storage",value:function(){window.localStorage.clear()}},{key:"get_from_storage",value:function(){var t=window.localStorage.getItem("save");if(null==t)return null;var e=pt.parse(JSON.parse(t));return null===e?null:e}},{key:"open_main_menu",value:function(t){t.refresh_menu(!0),t.isMainMenu=!0}},{key:"clear_and_start_tt",value:function(e){if(null!=e.initialPersistedData){var n=e.initialPersistedData.copy();t.load_save(e,n)}}}]),t}(),ft=(n(17),function(t){function e(t){var n;return Object($.a)(this,e),(n=Object(h.a)(this,Object(l.a)(e).call(this,t))).labyrinth=null,n.doUpdate=function(){if(null!=n.labyrinth){n.labyrinth.do_update(),n.labyrinth.draw();var t=!0,e=!1,i=void 0;try{for(var r,a=n.labyrinth.pressed[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value,$=Object(o.a)(s,1)[0];n.labyrinth.pressed.set($,!1)}}catch(h){e=!0,i=h}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}}},n.onResize=function(){null!=n.labyrinth&&n.labyrinth.resize(window.innerWidth,window.innerHeight)},n.onKeydown=function(t){if(null!=n.labyrinth){var e=!1;n.labyrinth.pressed.has(t.key)?(n.labyrinth.pressed.set(t.key,!0),e=!0):"ArrowLeft"===t.key?(n.labyrinth.pressed.set("4",!0),e=!0):"ArrowRight"===t.key?(n.labyrinth.pressed.set("6",!0),e=!0):"ArrowUp"===t.key?(n.labyrinth.pressed.set("8",!0),e=!0):"ArrowDown"===t.key?(n.labyrinth.pressed.set("2",!0),e=!0):"Enter"===t.key&&(n.labyrinth.pressed.set("5",!0),e=!0),e&&n.doUpdate()}},document.body.style.overflow="hidden",n}return Object(c.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=new vt;this.labyrinth=t,this.labyrinth.resize(window.innerWidth,window.innerHeight),window.addEventListener("resize",this.onResize),window.addEventListener("keydown",this.onKeydown),new p("Inconsolata").load().then((function(){t.draw()}))}}]),Object(u.a)(e,[{key:"render",value:function(){return i.createElement("div",{id:"canvasContainer"},i.createElement("canvas",{id:"canvas"},"Your browser doesn't seem to support HTML5. Please upgrade your browser."))}}]),e}(i.Component)),dt=function(){return r.a.createElement(ft,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.0b2b2a7d.chunk.js.map